### Утилита grep

* `^` - начало строки;
* `.` - любой символ;
* `[   ]` - любой символ или диапазон символов, из перечисленных в квадратных скобках;
* `[^  ]` - то же самое, но с отрицанием;
* `$` - признак конца строки;
* `(   )` - группа символов или подстановок;
* `*` - повторение предыдущего символа 0 или более раз;
* `?` - повторение предыдущего символа 0 или 1 раз (только ERE);
* `+` - повторение предыдущего символа 1 или более раз  (только ERE);
* `{n}` - повторение предыдущего символа ровно `n` раз (только ERE);
* `{m, n}` - повторение предыдущего символа от `m` до `n` раз (только ERE);
* `|` - выбор одного из вариантов, между которыми встретился этот символ  (только ERE).


Утилита `grep` построчно просматривает текст из файла или стандартного потока ввода, и выполняет фильтрацию содержимого, оставляя только те строки текста, которые соответствуют шаблону.

Пример. Содержимое исходного файла `test.txt`:

```
мама мыла раму
папа кушал сидр
акос любят все
мы все умрем
физтех чемпион физтех лучше всех
```

```
# только одна строка, которая содержит слово "мама"
> ???
мама мыла раму

# строки, которые содержат слова "мама" и "папа"
> ???
мама мыла раму
папа кушал сидр

# все строки, которые начинаются со слова из четырех букв
> ???
мама мыла раму
папа кушал сидр
акос любят все
```

В последнем примере обратите внимание на следующие особенности:

* необходима опция `-E`, поскольку используется конструкция `{n}`, определенная в расширенном стандарте;
* регулярное выражение содержит символ пробела, поэтому заключено в кавычки.


Вместе с утилитой `grep` часто используется утилита `cut`, которая в найденной строке выбирает определенный "столбец", считая разделителем либо символ табуляции, либо какой-то произвольно заданный символ.

```
# найдем все вторые слова в строках, которые начинаются
# со слова из четырех букв
> ????
мыла
кушал
любят
```

---

```python
with open("b.txt", "w") as f:
    for i in range(100):
        tup = (str(i), "div17" if i % 17 == 0 else "no17")
        f.write("\t".join(tup) + "\n")
```


```bash
%%bash
cat b.txt | head -n 5
# Выведите все строчки где есть подстрока div17
# <your line of code here>
```

    0	div17
    1	no17
    2	no17
    3	no17
    4	no17


```bash
%%bash
# Выясните, что выведет следующая команда, не запуская ее.
# echo -e "A\nB\nC\nD" | grep -v C -n 
# Используйте только команды man и grep
```


```bash
%%bash
# Подсказка
man grep | grep -e "-C" -C 2
```

                  option, this has no effect and a warning is given.
    
           -C NUM, -NUM, --context=NUM
                  Print NUM lines of output context.  Places a line  containing  a
                  group separator (--) between contiguous groups of matches.  With

```bash
# Создадим файл на 100 строк
( for i in {0..99} ; do echo line$i ; done ) > a.txt
cat a.txt | head -n 3

# А теперь напишите последовательность команд, которая заменит вторую строчку с line1 на line100
# нельзя использовать replace конструкции, grep, sed
# <your code here>
```

    line0
    line1
    line2


<details> <summary> Способ в лоб (пожалуйста не смотрите, пока не напишете код решения задачки) </summary>
  <pre> <code> cat a.txt | python2 -c 'import sys; lines = list(sys.stdin); lines[1] = "line100\n"; print "".join(lines)' </code> </pre>
</details>

