# Семинар №8
## Системные вызовы

---

### Атрибуты процесса

Выдержка из [статьи на Хабре](https://habr.com/ru/post/423049/):
```
Процесс в ядре представляется просто как структура с множеством полей (определение структуры можно прочитать здесь).
Но так как статья посвящена системному программированию, а не разработке ядра, то несколько абстрагируемся и просто акцентируем внимание на важных для нас полях процесса:

 * Идентификатор процесса (`pid`)
 * Открытые файловые дескрипторы (`fd`)
 * Обработчики сигналов (`signal handler`)
 * Текущий рабочий каталог (`cwd`)
 * Переменные окружения (`environ`)
 * Код возврата
```

[Определение структуры можно прочитать [здесь](http://lxr.linux.no/linux/include/linux/sched.h#L520).]

---

### Файловые дескрипторы

Каждому открытому файлу и соединению соответствует число (int). Это число используется как идентификатор в функциях, работающих с файлами/соединениями.

 * `0` = `stdin` = стандартный поток ввода (`STDIN_FILENO`)
 * `1` = `stdout` = стандартный поток вывода (`STDOUT_FILENO`)
 * `2` = `stderr` = стандартный поток ошибок (`STDERR_FILENO`)

`STD*_FILENO` - стандартный макрос в C.

---

### Комментарии к ДЗ
 * Каждому `open` свой `close`
 * Обрабатывайте ошибки при `open/close/read/write/lseek`
 * Не забывайте про `retryable errors` в `read/write`
 * Не забывайте, что при чтении с помощью `read` данные не всегда могут быть прочтены целостно
 * Не забывайте, что `printf` буфферизированный
 * Не забывайте проставлять права доступа для файла при флаге `O_CREAT`
